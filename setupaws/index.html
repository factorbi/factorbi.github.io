<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83822501-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-83822501-2');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Factor BI Team">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Link your AWS Account - Bipost Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Link your AWS Account";
    var mkdocs_page_input_path = "setupaws.md";
    var mkdocs_page_url = "/setupaws/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Bipost Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../registration/">Register</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Link your AWS Account</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#link-your-aws-account">Link your AWS Account</a></li>
    

    <li class="toctree-l2"><a href="#dont-have-an-aws-account">Don't have an AWS account?</a></li>
    

    <li class="toctree-l2"><a href="#check-closest-aws-region-to-you-location">Check closest AWS Region to you location</a></li>
    

    <li class="toctree-l2"><a href="#get-canonical-user-id-from-your-iam-home">Get Canonical User ID from your IAM Home</a></li>
    

    <li class="toctree-l2"><a href="#create-iam-policy-to-grant-access-to-s3">Create IAM Policy to Grant Access to S3</a></li>
    

    <li class="toctree-l2"><a href="#create-iam-role-to-allow-rds-access-to-s3">Create IAM Role to Allow RDS Access to S3</a></li>
    

    <li class="toctree-l2"><a href="#create-aurora-instance">Create Aurora Instance</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#instance-specifications">Instance specifications</a></li>
        
            <li><a class="toctree-l3" href="#network-security">Network &amp; Security</a></li>
        
            <li><a class="toctree-l3" href="#database-options">Database options</a></li>
        
            <li><a class="toctree-l3" href="#encryption">Encryption</a></li>
        
            <li><a class="toctree-l3" href="#failover">Failover</a></li>
        
            <li><a class="toctree-l3" href="#backup">Backup</a></li>
        
            <li><a class="toctree-l3" href="#monitoring">Monitoring</a></li>
        
            <li><a class="toctree-l3" href="#maintenance">Maintenance</a></li>
        
            <li><a class="toctree-l3" href="#launch-db-instance">Launch DB Instance</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#rds-instance-security-group">RDS Instance Security Group</a></li>
    

    <li class="toctree-l2"><a href="#set-iam-role-to-aurora-cluster">Set IAM Role to Aurora Cluster</a></li>
    

    <li class="toctree-l2"><a href="#create-cluster-parameter-group">Create Cluster Parameter Group</a></li>
    

    <li class="toctree-l2"><a href="#create-db-parameter-group">Create DB Parameter Group</a></li>
    

    <li class="toctree-l2"><a href="#set-cluster-parameter-group">Set Cluster Parameter Group</a></li>
    

    <li class="toctree-l2"><a href="#set-instance-parameter-group">Set Instance Parameter Group</a></li>
    

    <li class="toctree-l2"><a href="#verify-instance-configuration">Verify Instance Configuration</a></li>
    

    <li class="toctree-l2"><a href="#test-connection-to-your-rds-aurora">Test connection to your RDS Aurora</a></li>
    

    <li class="toctree-l2"><a href="#configure-instance-connection-details-on-factor-bi-console">Configure Instance Connection Details on Factor BI Console</a></li>
    

    <li class="toctree-l2"><a href="#security-of-your-rds-instance-for-production">Security of your RDS Instance for Production</a></li>
    

    <li class="toctree-l2"><a href="#security-for-downloading-data">Security for Downloading Data</a></li>
    

    <li class="toctree-l2"><a href="#console-access-to-bucket">Console Access to Bucket</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Download and Install</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../bipostexe/">Sync to AWS</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../synctowindows/">Sync back to Windows</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../bipostapi/">Bipost API</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../troubleshooting/">Troubleshooting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../businessintelligence/">Business Intelligence</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../intelisis/">Intelisis</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../microsip/">Microsip</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../aspel/">Aspel</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../about/">About</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Bipost Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Link your AWS Account</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="link-your-aws-account">Link your AWS Account<a class="headerlink" href="#link-your-aws-account" title="Permanent link">&para;</a></h2>
<p>Follow these instructions to link your AWS Account and RDS Aurora instance to Bipost API.</p>
<p><strong>IMPORTANT NOTICE: Many settings suggested here are for testing purposes. If you are to use the following AWS services for production you may want to follow your company policies and understand how to use AWS security according to your needs.</strong></p>
<hr />
<h2 id="dont-have-an-aws-account">Don't have an AWS account?<a class="headerlink" href="#dont-have-an-aws-account" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Create an AWS account here <a href="http://aws.amazon.com" target="_blank">aws.amazon.com</a></p>
<p><img alt="Screenshot" src="../img/Create_an_AWS_Account.png" /></p>
</li>
<li>
<p>AWS usually makes an automated verification phone call, we suggest to provide a land line.</p>
</li>
<li>Provide payment information.</li>
<li>Select Basic Support (free plan).</li>
<li>Check if you can open <a href="https://console.aws.amazon.com/rds/home">RDS Dashboard</a>, by searching under <em>AWS services</em>.</li>
<li>Congrats you have an AWS account!</li>
</ol>
<p>Not familiar with AWS or just want to skip creating AWS related services? <a href="mailto:info@factorbi.com">Write us.</a></p>
<hr />
<h2 id="check-closest-aws-region-to-you-location">Check closest AWS Region to you location<a class="headerlink" href="#check-closest-aws-region-to-you-location" title="Permanent link">&para;</a></h2>
<p><a href="http://cloudping.info">cloudping.info</a></p>
<p>Click the above link and hit <strong>HTTP Ping</strong> and look for the lowest latency.</p>
<p>Maybe you want to try this at different times of the day.</p>
<p>Take note of the closest region.</p>
<p><img alt="Screenshot" src="../img/CloudPing.png" /></p>
<hr />
<h2 id="get-canonical-user-id-from-your-iam-home">Get Canonical User ID from your IAM Home<a class="headerlink" href="#get-canonical-user-id-from-your-iam-home" title="Permanent link">&para;</a></h2>
<p>To perform the following steps, you need to sign in with the <strong>root</strong> AWS account.</p>
<ol>
<li>Upper right corner of your AWS console, click your account name (or follow next link).</li>
<li><a href="https://console.aws.amazon.com/iam/home#/security_credential">My Security Credentials.</a></li>
<li>Click <em>Continue to Security Credentials</em> if dialog appears.</li>
<li>Account Identifiers.</li>
<li>
<p>Copy AWS Account ID (12-digit) and Canonical User ID (64-digit).</p>
<p><img alt="Screenshot" src="../img/Your_Security_Credentials.png" /></p>
</li>
<li>
<p>Email these numbers to <a href="mailto:info@factorbi.com">info@factorbi.com</a> so we can setup your dedicated Bucket.</p>
</li>
</ol>
<p><em>Q: How these numbers are used?</em></p>
<p>We use your <a href="http://docs.aws.amazon.com/general/latest/gr/acct-identifiers.html">Canonical User ID</a> to create and provide access to a new and dedicated S3 bucket for your AWS Account. Further on you will link this bucket to you RDS instance.</p>
<hr />
<h2 id="create-iam-policy-to-grant-access-to-s3">Create IAM Policy to Grant Access to S3<a class="headerlink" href="#create-iam-policy-to-grant-access-to-s3" title="Permanent link">&para;</a></h2>
<p>From this point on you need the newly S3 bucket ARN that we provided over email on the previous step.</p>
<ol>
<li>Open <a href="https://console.aws.amazon.com/iam/home?#home">IAM Console.</a></li>
<li>In the left navigation pane choose <strong>Policies.</strong></li>
<li><strong>Create policy</strong> blue button.</li>
<li>Select <strong>Policy Generator</strong></li>
<li>
<p>Click <strong>JSON</strong> tab.</p>
<p><img alt="Screenshot" src="../img/IAM-policy-JSON-tab.png" /></p>
</li>
<li>
<p>Copy and paste the following.</p>
<pre><code>{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:GetObjectVersion"
            ],
            "Resource": [
                "arn:aws:s3:::bipostdata-123456789012"
            ]
        },
        {
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:GetObjectVersion"
            ],
            "Resource": [
                "arn:aws:s3:::bipostdata-123456789012/*"
            ]
        }
    ]
}
</code></pre>
</li>
<li>
<p>Replace the text <code>arn:aws:s3:::bipostdata-123456789012</code> with the bucket ARN you received from us over email.</p>
</li>
<li>
<p>Double check the JSON text is using your own ARN bucket and click <strong>Review policy</strong> blue button on the lower right.</p>
</li>
<li>
<p>Enter the following on the Review policy screen.</p>
<blockquote>
<p>Name: <code>AllowAuroraToS3</code></p>
<p>Name: <code>Connection to Factor BI bucket.</code></p>
</blockquote>
</li>
<li>
<p>Click <strong>Create policy</strong> blue button.</p>
</li>
</ol>
<p>Further information from AWS go to: <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/AuroraMySQL.Integrating.Authorizing.IAM.S3CreatePolicy.html">Allowing Amazon Aurora to Access Amazon S3 Resources</a></p>
<hr />
<h2 id="create-iam-role-to-allow-rds-access-to-s3">Create IAM Role to Allow RDS Access to S3<a class="headerlink" href="#create-iam-role-to-allow-rds-access-to-s3" title="Permanent link">&para;</a></h2>
<ol>
<li>Open <a href="https://console.aws.amazon.com/iam/home?#home">IAM Console.</a></li>
<li>In the left navigation pane choose <strong>Roles.</strong></li>
<li><strong>Create role</strong> blue button.</li>
<li>
<p>Choose <strong>AWS service,</strong> then <strong>RDS</strong></p>
<p><img alt="Screenshot" src="../img/Role_type.png" /></p>
</li>
<li>
<p><strong>Select your use case</strong> click <strong>RDS - CloudHSM and Directory Service,</strong> click <strong>Next: Permissions</strong> blue button.</p>
</li>
<li>Click <strong>Next:Review.</strong></li>
<li>Set <strong>Role name:</strong> <code>RDSLoadFromS3</code> and click <strong>Create role.</strong></li>
<li>Now from the navigation details, click the role you just created.</li>
<li>
<p>Under permissions tab, detach by clicking <strong>X</strong> the following:</p>
<blockquote>
<p>AmazonRDSDirectoryServiceAccess</p>
<p>RDSCloudHsmAuthorizationRole</p>
</blockquote>
</li>
<li>
<p>Now click <strong>Attach policy</strong> blue button.</p>
<p><img alt="Screenshot" src="../img/Attach_policy.png" /></p>
</li>
<li>
<p>Select <code>AllowAuroraToS3</code> and click <strong>Attach policy</strong> blue button.</p>
</li>
<li>
<p>Copy <strong>Role ARN</strong> string and save it for further use. It may look like this: <code>arn:aws:iam::123456789012:role/RDSLoadFromS3</code></p>
</li>
</ol>
<p>Further information from AWS go to: <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/AuroraMySQL.Integrating.Authorizing.IAM.CreateRole.html">Creating an IAM Role to Allow Amazon Aurora to Access AWS Services</a></p>
<hr />
<h2 id="create-aurora-instance">Create Aurora Instance<a class="headerlink" href="#create-aurora-instance" title="Permanent link">&para;</a></h2>
<h3 id="instance-specifications">Instance specifications<a class="headerlink" href="#instance-specifications" title="Permanent link">&para;</a></h3>
<ol>
<li>From AWS Console Home, upper right corner (next to you name) be sure to select the <a href="../setupaws/#check-closest-aws-region-to-you-location">closest region to your location.</a></li>
<li>Under menu <strong>Services</strong> search RDS.</li>
<li>From <strong>Amazon RDS</strong> click Instances.</li>
<li>Launch DB Instance, orange button.</li>
<li>Select Engine: <strong>Amazon Aurora</strong>, scroll down, Edition: <strong>MySQL 5.7-compatible</strong> click <strong>Next</strong> orange button.</li>
<li>DB instance class: for testing purposes select the smallest available, currently <strong>t2.small</strong></li>
<li>Multi-AZ deployment: for testing purposes select <strong>No</strong></li>
<li>Settings, DB Instance identifier: assign a name, lower-case and no special characters.</li>
<li>Master username: <strong>root</strong></li>
<li>
<p>Master Password: assign a strong password and store it in a secure place.</p>
<blockquote>
<p>Password can't contain spaces and the following characters: </p>
</blockquote>
<pre><code>/
"
@
</code></pre>
</li>
<li>
<p>Click <strong>Next</strong> orange button.</p>
</li>
</ol>
<p><img alt="Screenshot" src="../img/AuroraDB_Details.png" /></p>
<h3 id="network-security">Network &amp; Security<a class="headerlink" href="#network-security" title="Permanent link">&para;</a></h3>
<ol>
<li>Virtual Private Cloud (VPC): <strong>Create new VPC</strong></li>
<li>Subnet group: <strong>Create new DB Subnet Group</strong></li>
<li>Publicly accessible: <strong>Yes</strong></li>
<li>Availability zone: <strong>No Preference</strong></li>
<li>VPC security groups: <strong>Create new VPC security groups</strong></li>
</ol>
<p><img alt="Screenshot" src="../img/Aurora_NetworkAndSecurity.png" /></p>
<h3 id="database-options">Database options<a class="headerlink" href="#database-options" title="Permanent link">&para;</a></h3>
<ol>
<li>DB Cluster Identifier: <strong>leave blank</strong></li>
<li>Database name: <strong>leave blank</strong></li>
<li>Database port: <strong>3306</strong></li>
<li>DB parameter group: <strong>default.aurora-mysql5.7</strong></li>
<li>DB cluster parameter group: <strong>default.aurora-mysql5.7</strong></li>
<li>Option group: <strong>leave default</strong></li>
</ol>
<h3 id="encryption">Encryption<a class="headerlink" href="#encryption" title="Permanent link">&para;</a></h3>
<ul>
<li>Encryption: <strong>Disable encryption</strong></li>
</ul>
<h3 id="failover">Failover<a class="headerlink" href="#failover" title="Permanent link">&para;</a></h3>
<ul>
<li>Priority: <strong>tier-0</strong></li>
</ul>
<h3 id="backup">Backup<a class="headerlink" href="#backup" title="Permanent link">&para;</a></h3>
<ul>
<li>Backup retention period: <strong>1 day</strong></li>
</ul>
<h3 id="monitoring">Monitoring<a class="headerlink" href="#monitoring" title="Permanent link">&para;</a></h3>
<ul>
<li>Enhanced Monitoring: <strong>Disable enhanced monitoring</strong></li>
</ul>
<h3 id="maintenance">Maintenance<a class="headerlink" href="#maintenance" title="Permanent link">&para;</a></h3>
<ol>
<li>Auto minor version upgrade: <strong>Enable auto minor version upgrade</strong></li>
<li>Maintenance windows: <strong>No preference</strong></li>
</ol>
<h3 id="launch-db-instance">Launch DB Instance<a class="headerlink" href="#launch-db-instance" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Click Launch DB Instance orange button.</p>
</li>
<li>
<p>This process may take a few minutes.</p>
</li>
<li>
<p>Click <strong>View DB Instance details.</strong></p>
</li>
</ul>
<hr />
<h2 id="rds-instance-security-group">RDS Instance Security Group<a class="headerlink" href="#rds-instance-security-group" title="Permanent link">&para;</a></h2>
<p>Click <strong>Instances</strong> left pane.</p>
<p>Once the new instance has <strong>Status:</strong> <code>available</code> proceed:</p>
<ol>
<li>Click your new instance.</li>
<li>Scroll down to <strong>Connect</strong> section. </li>
<li>
<p>Under <strong>Security group rules</strong> click the blue string that looks like this</p>
<blockquote>
<p><code>rds-launch-wizard (sg-XXXXXXXX)</code></p>
</blockquote>
<p><img alt="Screenshot" src="../img/Instance_details.png" /></p>
</li>
<li>
<p>You are now on EC2 Management Console and Security Group ID is already selected.</p>
</li>
<li>Click <strong>Actions \ Edit inbound rules</strong></li>
<li>Remove the default Custom TCP rule created.</li>
<li>Click <strong>Add Rule</strong>, under Type select <code>MYSQL/Aurora</code></li>
<li>
<p>Source <strong>Custom</strong> and enter this value: <code>0.0.0.0/0</code></p>
</li>
<li>
<p>Repeat steps 7 &amp; 8, and type value <code>::/0</code></p>
<p><img alt="Screenshot" src="../img/Inbound_rules.png" /></p>
</li>
<li>
<p>Click <strong>Save</strong> blue button.</p>
</li>
<li>Click <strong>Actions \ Edit outbound rules</strong></li>
<li>Verify if Type: <code>All traffic</code>, Destination: <code>Custom</code> and value: <code>0.0.0.0/0</code> is already set, if not, add the rule.</li>
<li>Go back to <a href="https://console.aws.amazon.com/rds/home">RDS Console</a>, select your instance, click <strong>Instance actions \ Reboot</strong>, confirm with orange button on the right.</li>
<li>
<p>Wait until <strong>Status</strong> is <code>available</code> </p>
<p><img alt="Screenshot" src="../img/Instance_StatusAvailable.png" /></p>
</li>
<li>
<p>Click your DB Instance, scroll down to <strong>Details</strong> section and check if <strong>Security groups</strong> are <code>( active )</code></p>
</li>
</ol>
<hr />
<h2 id="set-iam-role-to-aurora-cluster">Set IAM Role to Aurora Cluster<a class="headerlink" href="#set-iam-role-to-aurora-cluster" title="Permanent link">&para;</a></h2>
<ol>
<li>Open <a href="https://console.aws.amazon.com/rds/">RDS console.</a></li>
<li>Choose <strong>Clusters</strong> on left pane.</li>
<li>Click radio button of your newly cluster.</li>
<li>
<p>Click <strong>Actions</strong> then <strong>Manage IAM roles.</strong></p>
<p><img alt="Screenshot" src="../img/RDS_ClusterActions.png" /></p>
</li>
<li>
<p>Under <strong>Add IAM roles to this cluster</strong> select the role you just created: <code>RDSLoadFromS3</code> and click <strong>Add role</strong> button.</p>
<p><img alt="Screenshot" src="../img/RDS_Manage_IAM_Role.png" /></p>
</li>
<li>
<p>Wait until you see Status <strong>active</strong> under Current IAM roles for this cluster.</p>
</li>
<li>Click <strong>Done</strong>.</li>
</ol>
<hr />
<h2 id="create-cluster-parameter-group">Create Cluster Parameter Group<a class="headerlink" href="#create-cluster-parameter-group" title="Permanent link">&para;</a></h2>
<ol>
<li>Open <a href="https://console.aws.amazon.com/rds/">RDS console.</a></li>
<li>On left pane go to <strong>Parameter Groups.</strong></li>
<li>
<p>Click <strong>Create parameter group</strong> orange button on top.</p>
<blockquote>
<p>Parameter group family: <code>aurora-mysql5.7</code></p>
<p>Type: <code>DB Cluster Parameter Group</code></p>
<p>Group name: <code>AuroraClusterAllowAWSAccess</code></p>
<p>Description: <code>Allow cluster access to Amazon S3</code></p>
</blockquote>
</li>
<li>
<p>Click <strong>Create</strong> orange button and refresh browser.</p>
</li>
<li>Click check box on your new <code>auroraclusterallowawsaccess</code> parameter group and click <strong>Parameter group actions</strong> and then <strong>Edit</strong> button on top.</li>
<li>Make sure you have your ARN role string (<a href="../setupaws/#create-iam-role-to-allow-rds-access-to-s3">step 12 here</a>) and replace it below.</li>
<li>
<p>Set the following:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Edit Values</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>aurora_load_from_s3_role</td>
<td>paste <a href="../setupaws/#create-iam-role-to-allow-rds-access-to-s3">Role ARN string</a></td>
<td><code>arn:aws:iam::123456789012:role/RDSLoadFromS3</code></td>
</tr>
<tr>
<td>aurora_select_into_s3_role</td>
<td>paste <a href="../setupaws/#create-iam-role-to-allow-rds-access-to-s3">Role ARN string</a></td>
<td><code>arn:aws:iam::123456789012:role/RDSLoadFromS3</code></td>
</tr>
<tr>
<td>aws_default_s3_role</td>
<td>paste <a href="../setupaws/#create-iam-role-to-allow-rds-access-to-s3">Role ARN string</a></td>
<td><code>arn:aws:iam::123456789012:role/RDSLoadFromS3</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Save Changes</strong> orange button.</p>
</li>
<li>
<p>Click <strong>Preview changes</strong> and it should look like this:</p>
<p><img alt="Screenshot" src="../img/RDS_Cluster_Parameter_groups.png" /></p>
</li>
</ol>
<p>Further information from AWS go to: <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/AuroraMySQL.Integrating.Authorizing.IAM.AddRoleToDBCluster.html">Associating an IAM Role with a DB Cluster</a></p>
<hr />
<h2 id="create-db-parameter-group">Create DB Parameter Group<a class="headerlink" href="#create-db-parameter-group" title="Permanent link">&para;</a></h2>
<ol>
<li>Open <a href="https://console.aws.amazon.com/rds/">RDS console.</a></li>
<li>On left pane go to <strong>Parameter Groups.</strong></li>
<li>
<p>Click <strong>Create parameter group</strong> orange button on top.</p>
<blockquote>
<p>Parameter group family: <code>aurora-mysql5.7</code></p>
<p>Type: <code>DB Parameter Group</code></p>
<p>Group name: <code>AuroraInstanceAllowAWSAccess</code></p>
<p>Description: <code>Allow instance access to Amazon S3</code></p>
</blockquote>
</li>
<li>
<p>Click <strong>Create</strong> orange button and refresh browser.</p>
</li>
<li>Click check box on your new <code>aurorainstanceallowawsaccess</code> parameter group and click <strong>Parameter group actions</strong> and then <strong>Edit</strong> button on top.</li>
<li>
<p>Set the following:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Edit Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>log_bin_trust_function_creators</td>
<td>1</td>
</tr>
<tr>
<td>max_allowed_packet</td>
<td>1073741824</td>
</tr>
<tr>
<td>max_connections</td>
<td>16000</td>
</tr>
<tr>
<td>max_user_connections</td>
<td>4294967295</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Preview changes</strong> and double check.</p>
</li>
<li>Click <strong>Save changes</strong> orange button.</li>
</ol>
<hr />
<h2 id="set-cluster-parameter-group">Set Cluster Parameter Group<a class="headerlink" href="#set-cluster-parameter-group" title="Permanent link">&para;</a></h2>
<ol>
<li>Open <a href="https://console.aws.amazon.com/rds/">RDS console.</a></li>
<li>On left pane go to <strong>Clusters.</strong></li>
<li>Click radio button on your new cluster.</li>
<li>Click <strong>Actions</strong> then <strong>Modify cluster</strong> button on top.</li>
<li>Under Database options, set <strong>DB cluster parameter group</strong> to <code>auroraclusterallowawsaccess</code>.</li>
<li>Scroll down and click <strong>Continue.</strong></li>
<li>Click option <strong>Apply immediately</strong> and click <strong>Modify cluster.</strong></li>
</ol>
<h2 id="set-instance-parameter-group">Set Instance Parameter Group<a class="headerlink" href="#set-instance-parameter-group" title="Permanent link">&para;</a></h2>
<ol>
<li>Open <a href="https://console.aws.amazon.com/rds/">RDS console.</a></li>
<li>On left pane go to <strong>Instances.</strong></li>
<li>Click radio button on your new instance.</li>
<li>Click <strong>Instance Actions \ Modify</strong> button on top.</li>
<li>Scroll down and under Database options, set <strong>DB parameter group</strong> to <code>aurorainstanceallowawsaccess</code></li>
<li>You may also notice that <strong>DB cluster parameter group</strong> is already set to <code>auroraclusterallowawsaccess</code></li>
<li>Click <strong>Continue</strong> orange button.</li>
<li>Select <strong>Apply Immediately</strong> and click <strong>Modify DB Instance.</strong></li>
<li>Use refresh icon and wait until Status is available on your instance.</li>
<li>Click Instance actions, select Reboot and confirm.</li>
<li>Use refresh icon and wait until Status is available on your instance.</li>
</ol>
<hr />
<h2 id="verify-instance-configuration">Verify Instance Configuration<a class="headerlink" href="#verify-instance-configuration" title="Permanent link">&para;</a></h2>
<ol>
<li>Open <a href="https://console.aws.amazon.com/rds/">RDS console.</a></li>
<li>On left pane go to <strong>Instances.</strong></li>
<li>Click your new instance.</li>
<li>
<p>Verify the following:</p>
<blockquote>
<p>DB instance status: <strong>available</strong></p>
<p>Parameter group: <strong>aurorainstanceallowawsaccess (in-sync)</strong></p>
<p>DB cluster parameter group: <strong>auroraclusterallowawsaccess (in-sync)</strong></p>
<p>Security groups: <strong>rds-launch-wizard (sg-XXXXXXXX) ( active )</strong></p>
<p>Publicly accessible: <strong>Yes</strong></p>
</blockquote>
</li>
</ol>
<hr />
<h2 id="test-connection-to-your-rds-aurora">Test connection to your RDS Aurora<a class="headerlink" href="#test-connection-to-your-rds-aurora" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Download and install any <strong>MySQL client</strong> of your preference:</p>
<pre><code>For Mac you may use "Sequel Pro" or "MySQL Workbench"
For Windows you may use "MySQL Workbench" or "HeidiSQL"
</code></pre>
</li>
<li>
<p>On your AWS Console go to <a href="https://console.aws.amazon.com/rds/home">RDS Dashboard</a>, then Clusters, select your new cluster and copy the <strong>Cluster Endpoint</strong>, which is a blue string with more than 60 characters.</p>
</li>
<li>
<p>Launch your MySQL client and configure a new connection:</p>
<blockquote>
<p><strong>Name:</strong> type any name of your preference.</p>
<p><strong>Host:</strong> Paste the Cluster Endpoint.</p>
<p><strong>Username:</strong> root</p>
<p><strong>Password:</strong> type the Master Password</p>
<p><strong>Port:</strong> 3306</p>
<p><strong>Database:</strong> Leave blank</p>
<p><strong>Connect using SSL:</strong> No</p>
</blockquote>
</li>
<li>
<p>Click Connect and verify that you can successfully connect to your RDS instance.</p>
</li>
</ol>
<hr />
<h2 id="configure-instance-connection-details-on-factor-bi-console">Configure Instance Connection Details on Factor BI Console<a class="headerlink" href="#configure-instance-connection-details-on-factor-bi-console" title="Permanent link">&para;</a></h2>
<ol>
<li>Log in to <a href="https://s3.amazonaws.com/biforms-prod/index.html" target="_blank">Factor BI Console.</a></li>
<li>Go to RDS Instances and then click under Hostname.</li>
<li>Complete all fields on the form with instance connection information.</li>
</ol>
<hr />
<h2 id="security-of-your-rds-instance-for-production">Security of your RDS Instance for Production<a class="headerlink" href="#security-of-your-rds-instance-for-production" title="Permanent link">&para;</a></h2>
<p>If your are ready to use Bipost API for production, we highly recommend the following:</p>
<ol>
<li>Use <strong>MySQL client</strong> to create a new user.</li>
<li>Set a strong password.</li>
<li>Gran the new user with the following: <code>GRANT LOAD FROM S3 ON *.* TO 'your-user-name';</code></li>
<li>
<p>Set the following Global Privileges:</p>
<p><img alt="Screenshot" src="../img/MySQL_Global_Privileges.png" /></p>
</li>
</ol>
<hr />
<h2 id="security-for-downloading-data">Security for Downloading Data<a class="headerlink" href="#security-for-downloading-data" title="Permanent link">&para;</a></h2>
<p>If you plan to download data from Aurora to your on-premises databases, there are some settings to make on your AWS account.</p>
<ol>
<li>Open <a href="https://console.aws.amazon.com/iam/home#/users">IAM console.</a></li>
<li>Click <strong>Add user</strong> blue button on top left corner.</li>
<li>User name: <code>outFromS3</code></li>
<li>Access type: <strong>Programmatic access</strong></li>
<li>
<p>Click <strong>Next: Permissions</strong> blue button lower right corner.</p>
<p><img alt="Screenshot" src="../img/IAM-out-security.png" /></p>
</li>
<li>
<p>Select <strong>Attach existing policies directly</strong></p>
</li>
<li>On the search box type <strong>S3</strong> and select <strong>AmazonS3FullAccess</strong></li>
<li>
<p>Click <strong>Next: Review</strong> blue button lower right corner.</p>
<p><img alt="Screenshot" src="../img/IAM-out-security2.png" /></p>
</li>
<li>
<p>Click <strong>Download .csv</strong>.</p>
</li>
<li>
<p>Email the CSV to <a href="mailto:info@factorbi.com">info@factorbi.com</a> so we can setup the downloading process.</p>
<p><img alt="Screenshot" src="../img/IAM-out-security3.png" /></p>
</li>
</ol>
<hr />
<h2 id="console-access-to-bucket">Console Access to Bucket<a class="headerlink" href="#console-access-to-bucket" title="Permanent link">&para;</a></h2>
<p>Bipost synchronization uses S3 to upload the data that is extracted from the on-premises database. The bucket is located within Factor BI AWS account so we can efficiently handle API calls, patches and new releases.</p>
<p>Remember, we create a unique S3 bucket for each one of our customers, so nothing gets mixed up.</p>
<p>Sometimes you may want to access this bucket and review files and folders.</p>
<p>To accomplish this we provide an <a href="http://docs.aws.amazon.com/IAM/latest/UserGuide/console_controlling-access.html">AWS Console access</a> with a user, password and a direct link to your bucket.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../installation/" class="btn btn-neutral float-right" title="Download and Install">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../registration/" class="btn btn-neutral" title="Register"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>© 2016 - 2018, <a href="https://www.factorbi.com">Factor BI, S.A. de C.V.</a> All rights reserved.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../registration/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../installation/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
